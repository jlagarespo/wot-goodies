let template(t, r, name, body) {
    let rcmd "echo \"" .. escape(body) .. "\" | sed 's/" .. t .. "/" .. escape(r) .. "/g'"
    eval("let " .. name .. "{" .. run(rcmd) .. "}")
}

let function_body r#""hello " .. T .. "\n""#
let function_name "test"

let T "T"

template(T, "\"world\"", function_name, function_body)
test

template(T, "\"moon\"", function_name, function_body)
test
